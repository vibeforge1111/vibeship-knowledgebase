## Memory (Mind)

This project uses Mind for persistent memory across sessions.

### Required Protocol

1. **Session Start**: ALWAYS call `mind_recall()` before responding to the first message.

2. **During Work**: Use `mind_log(message, type)` to capture:
   - `decision`, `learning`, `problem`, `progress` → MEMORY.md (permanent)
   - `experience`, `blocker`, `rejected`, `assumption` → SESSION.md (ephemeral)

3. **Session End**: Summarize with `## DATE | what happened | mood: X`

### Tools Available
- `mind_recall()` - Load session context (CALL FIRST!)
- `mind_log(msg, type)` - Log to session or memory
- `mind_session()` - Get current session state
- `mind_blocker(description)` - Log blocker + auto-search for solutions
- `mind_search(query)` - Find specific memories
- `mind_remind(msg, when)` - Set reminder
- `mind_checkpoint()` - Force process pending memories
- `mind_edges(intent)` - Check for gotchas before coding
- `mind_spawn_helper(problem)` - Package problem for fresh agent

---

<!-- MIND:CONTEXT - Auto-generated by Mind. Do not edit. -->
## Stack
sveltekit, typescript

## Gotchas
(None yet - add to .mind/MEMORY.md Gotchas section)
<!-- MIND:END -->

# VibeShip Knowledge Base

## Project Overview

**vibeship.co** - Main authority hub for vibe coding security education.

**Architecture:**
- `vibeship.co` (this site) = Educational content, SEO, LLM citations
- `scanner.vibeship.co` = Scanner product (separate repo)
- `mind.vibeship.co` = Future Mind product

## Development

```bash
npm run dev          # Start dev server
npm run build        # Build for production
npm run preview      # Preview production build
```

**Stack:** SvelteKit 2.0, TypeScript, Static/SSG on Vercel

## URL Structure

```
vibeship.co/
├── /kb/vibe-coding-tools/      # AI tools (Cursor, Claude Code, Bolt, etc.)
├── /kb/security/               # Security concepts
│   ├── /vulnerabilities/       # SQL injection, XSS, etc.
│   ├── /stacks/                # Next.js + Supabase, etc.
│   ├── /fixes/                 # AI-ready fix prompts
│   └── /checklists/            # Security checklists
├── /kb/memory/                 # Memory concepts (Mind-adjacent)
├── /kb/agents/                 # Agent concepts (Spawner-adjacent)
├── /kb/vibe-coding/            # General vibe coding education
├── /kb/glossary/               # Plain English definitions
├── /research/                  # Data & research hub
└── /blog/                      # Thought leadership
```

See `docs/KB_SITEMAP.md` for complete architecture.

---

## Critical Rules

### 1. VIBE CODING TERMINOLOGY (SEO)

**Use "vibe coding" terms throughout all content:**
- **vibe coding** - Building with AI tools
- **vibe coders** - Our audience
- **vibe coded** - Past tense for AI-generated apps
- **AI-generated code** - Technical synonym

Every article: 3-5 uses of "vibe coding" terms minimum.

### 2. DATA INTEGRITY (TOP PRIORITY)

**NEVER hallucinate or fabricate data.**

- NEVER invent statistics or percentages
- NEVER claim Scanner data exists when it doesn't
- ALWAYS cite real sources with links
- ALWAYS label unavailable data: "Data coming soon" or "Based on [external source]"

```markdown
❌ WRONG: "Found in 23.4% of 10,847 AI-generated repositories"
✅ RIGHT: "Ranked #3 in [OWASP Top 10 (2021)](https://owasp.org/Top10/)"
✅ RIGHT: "VibeShip Scanner is collecting data. Early patterns suggest..."
```

### 3. SECURITY SCANNING TOOLS

Use **opengrep** (not semgrep) for rule syntax. Also use **trivy** and **gitleaks**.

### 4. ARTICLE PAGE STYLING (MANDATORY)

**All KB article pages MUST follow the vibeship design system exactly.**

#### Required Structure

```svelte
<script lang="ts">
  import { Header } from '$lib/components/layout';

  const breadcrumbs = [
    { label: 'Knowledge Base', href: '/kb' },
    { label: 'Category', href: '/kb/category' },
    { label: 'Article Title' }
  ];
</script>

<Header {breadcrumbs} />

<div class="content-wrapper">
  <article class="content-main content-wide">
    <!-- Article content here -->
  </article>
</div>

<style>
  /* Only page-specific styles using CSS variables */
</style>
```

#### CSS Rules

**ALWAYS use CSS variables - NEVER hardcode colors:**
```css
/* ✅ CORRECT */
background: var(--bg-secondary);
color: var(--text-primary);
border: 1px solid var(--border);
color: var(--green-dim);

/* ❌ WRONG - Never do this */
background: #f8fafc;
color: #1e40af;
border: 1px solid #e5e7eb;
```

**Available CSS Variables:**
- Backgrounds: `--bg-primary`, `--bg-secondary`, `--bg-tertiary`
- Text: `--text-primary`, `--text-secondary`, `--text-tertiary`
- Borders: `--border`, `--border-strong`
- Accents: `--green`, `--green-dim`, `--orange`, `--red`, `--blue`, `--violet`, `--pink`
- Grays: `--gray-100` through `--gray-900`

#### Global CSS Classes (Use These)

**From components.css - use instead of custom styles:**
- `.badge` - Category/type badges
- `.quick-answer` - Quick answer boxes with green left border
- `.stats-row` - Grid of stats cards
- `.code-block` - Code example containers
- `.code-comparison` - Before/after code comparison
- `.fix-prompt` - AI fix prompt boxes
- `.faq-list`, `.faq-item` - FAQ sections
- `.related-grid` - Related content grid
- `.card` - Content cards with hover effects
- `.cta-box` - Call-to-action boxes

#### Minimal Scoped Styles

**Target: Under 150 lines of scoped styles per article.**

Only add scoped styles for truly page-specific elements:
- Custom badge variants (e.g., `.badge-pillar`)
- Table of contents styles
- Article-specific warning boxes

**Reference article:** `src/routes/kb/security/vulnerabilities/sql-injection/+page.svelte`

---

## Content System

**All KB content uses the two-agent pipeline:**

1. **Research Agent** → Creates Content Brief
2. **Writer Agent** → Transforms brief into article

### Key Documents (READ THESE)

| Document | Location | Purpose |
|----------|----------|---------|
| **Master Guide** | `docs/.content-ops/VIBESHIP-KB-MASTER.md` | Complete content system |
| **Writer Prompt** | `docs/.content-ops/strategies/VIBESHIP-SECURITY-WRITER-AGENT-PROMPT.md` | Full writing guidelines |
| **SEO/LLM Guide** | `docs/.content-ops/references/seo-llm-guide.md` | Optimization rules |
| **Pipeline** | `docs/.content-ops/PIPELINE.md` | Two-agent workflow |
| **Queue** | `docs/.content-ops/QUEUE.md` | Articles to generate |
| **QA Checklist** | `docs/.content-ops/checklists/qa-checklist.md` | Pre-publish checklist |

### Templates
- `docs/.content-ops/templates/vulnerability-brief.md`
- `docs/.content-ops/templates/tool-brief.md`
- `docs/.content-ops/templates/stack-brief.md`

---

## Top 10 Rules (Quick Reference)

### SEO Rules
| # | Rule |
|---|------|
| 1 | Answer in first 50 words |
| 2 | Question-based H2s |
| 3 | Title under 60 chars, keyword first |
| 4 | 5-10 internal links per page |
| 5 | One topic = one page |

### LLM Rules
| # | Rule |
|---|------|
| 6 | Self-contained sections (75-225 words) |
| 7 | Citable facts with attribution + links |
| 8 | First sentence answers the H2 |
| 9 | FAQ answers start with direct answer |
| 10 | Specific numbers, not vague claims |

**Full details:** `docs/.content-ops/references/seo-llm-guide.md`

---

## Writing Quick Reference

### Content Formula
```
1. HOOK (First 50 words) - Direct answer + stat
2. STATS BOX - Prevalence, trend, most affected tool
3. WHAT IS IT (100-150 words) - Plain English + analogy
4. AI TOOL PATTERNS (150-200 words) - Why AI generates this
5. DETECTION (100-150 words) - Patterns to search for
6. SOLUTION (200-400 words) - AI fix prompt + manual fix
7. FAQ (5 questions) - Direct answers
8. RELATED LINKS
```

### Key Writing Rules
- **First sentence after H2** = Direct answer to implied question
- **Code examples** = Always show before AND after
- **Jargon** = Explain on first use
- **No em dashes** (—) - Use hyphens (-) or rewrite

### Authority Sources (Tier 1-2)
```
OWASP:           https://owasp.org/Top10/
CWE:             https://cwe.mitre.org/
NIST NVD:        https://nvd.nist.gov/
PortSwigger:     https://portswigger.net/web-security
Snyk Learn:      https://learn.snyk.io/
```

**Full source hierarchy:** `docs/.content-ops/references/seo-llm-guide.md`

---

## Svelte Development

Use [svelte-claude-skills](https://github.com/spences10/svelte-claude-skills):
- **svelte5-runes** - `$state()`, `$derived()`, `$effect()`
- **sveltekit-data-flow** - Load functions, form actions
- **sveltekit-structure** - File-based routing, layouts

---

## Processing Content

**Start prompt:**
```
Process the next article from docs/.content-ops/QUEUE.md using the two-agent pipeline
```

**Workflow:**
1. Check `QUEUE.md` for next article
2. Research Agent creates brief using template
3. Review brief for completeness
4. Writer Agent writes article using `VIBESHIP-SECURITY-WRITER-AGENT-PROMPT.md`
5. QA against `qa-checklist.md`
6. Output Svelte component
7. Update QUEUE.md status
